extends layout

block content
  h1= "plantbud // " + title
  hr
  div.row
    div.col-md-2
    div.col-md-4
      h3 Enter coordinates
    div.col-md-2(align="right")
      h3
        button.btn.btn-sm.btn-info(onclick='geolocate()') Get Location
          span.spin(style={display: 'none'})
            i(class='fa fa-star fa-pulse fa-1x fa-fw')
    div.col-md-4

  div.row
    div.col-md-2
    div.col-md-6
      div#locate-error
    div.col-md-4

  div.row
    div.col-md-2
    div.col-md-6
      form(method='POST' action='')
        div.form-group
          label(for='lat') Latitude:
          input#lat.form-control(type='text', placeholder='37.862612' name='lat' value=(undefined===coord ? '' : coord.lat))
        div.form-group
          label(for='lon') Longitude:
          input#lon.form-control(type='text', placeholder='-122.261762' name='lon' value=(undefined===coord ? '' : coord.lon))
        button.btn.btn-primary(type='submit') Submit
    div.col-md-4

  if errors
    b There were errors in your submission:
    ul
      for error in errors
        li!= error.msg
  div.row
    if weather
      h3 Results
      b Weather
      p This is the information we have for your location.
      ul
        li Average Rainfall: #{weather.avgRain} inches
        li Normal Average Temperature: #{weather.avgTemp}F
        li Normal Low Temperature: #{weather.minTemp}F
        li Normal High Temperature: #{weather.maxTemp}F

    if plants
        b Plants
        p These are plants that would fare well given these weather conditions.
        table.table
          thead
            tr
              td Common Name
              td Water Needed
              td Min. Temp
              td Max. Temp
          each plant in plants
            tr
            td #{plant.common_name}
            td #{plant.water}
            td #{plant.min_temp}
            td #{plant.max_temp}

        div(align="center")
          form(method="POST" action="map")
            input.hide(type="text" name="lat" value=coord.lat)
            input.hide(type="text" name="lon" value=coord.lon)
            button.btn.btn-primary(type='submit') Proceed to Mapping

block scripts
    script(src="/javascripts/geolocate.js")
